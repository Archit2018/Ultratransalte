# 🌐 UltraTranslate - 多API浏览器翻译扩展

<div align="center">

![版本](https://img.shields.io/badge/版本-1.0.0-blue.svg)
![Chrome](https://img.shields.io/badge/Chrome-扩展-green.svg)
![许可证](https://img.shields.io/badge/许可证-MIT-purple.svg)
![API](https://img.shields.io/badge/API-4+-orange.svg)
![语言](https://img.shields.io/badge/语言-9-red.svg)

**🚀 一款强大的Chrome扩展，支持多API实时网页翻译**

### 📚 文档语言

[**English**](README.md) | [**中文简体**](README.zh-CN.md) | [**日本語**](README.ja.md) | [**한국어**](README.ko.md) | [**Español**](README.es.md)

</div>

---

### ✨ 功能特点

<table>
<tr>
<td width="50%">

#### 🎯 核心功能
- 🔄 **多API支持** - 谷歌、DeepSeek、OpenAI、百度
- 📝 **保留原文** - 并排对比显示
- 🎨 **智能检测** - 高级文本过滤
- ⚡ **实时翻译** - 带进度指示器
- 💾 **智能缓存** - LRU缓存提升性能

</td>
<td width="50%">

#### 🎨 用户界面
- 🌙 **暗黑主题** - OpenAI风格设计
- 🌍 **9种语言** - 中文/英文/日语/韩语等
- 🚀 **快速弹窗** - 快速访问控制
- ⚙️ **设置页面** - 全面的选项配置

</td>
</tr>
</table>

### 🌟 支持的界面语言

<div align="center">

| 界面语言 | 原生名称 | 旗帜 |
|:---:|:---:|:---:|
| 英语 | English | 🇬🇧 |
| 中文简体 | 中文简体 | 🇨🇳 |
| 中文繁体 | 中文繁體 | 🇹🇼 |
| 日语 | 日本語 | 🇯🇵 |
| 韩语 | 한국어 | 🇰🇷 |
| 西班牙语 | Español | 🇪🇸 |
| 法语 | Français | 🇫🇷 |
| 德语 | Deutsch | 🇩🇪 |
| 俄语 | Русский | 🇷🇺 |

</div>

### 🚀 高级功能
- 🤖 **自定义AI提示词** - 个性化翻译行为
- 📦 **批量处理** - 优化多文本翻译
- ↔️ **RTL支持** - 阿拉伯语、希伯来语、波斯语支持
- ♿ **无障碍** - ARIA、键盘快捷键、屏幕阅读器
- 🔄 **自动翻译** - 智能语言检测
- 🚫 **站点排除** - 配置不翻译的网站

## 📦 安装

<details>
<summary><b>📥 快速安装指南</b></summary>

```bash
# 1. 克隆仓库
git clone https://github.com/yourusername/ultratranslate.git

# 2. 打开Chrome扩展页面
chrome://extensions/

# 3. 启用开发者模式
切换开关 → 开启

# 4. 加载扩展
点击"加载已解压的扩展程序" → 选择文件夹
```

</details>

### 🎯 分步安装指南

| 步骤 | 操作 | 说明 |
|:---:|:---|:---|
| 1️⃣ | **下载** | 克隆或下载此仓库 |
| 2️⃣ | **打开扩展** | 导航至 `chrome://extensions/` |
| 3️⃣ | **开发者模式** | 启用右上角的开关 |
| 4️⃣ | **加载扩展** | 点击并选择扩展文件夹 |
| 5️⃣ | **成功！** | 扩展图标出现在工具栏 |

## ⚙️ 配置

### 🚀 快速设置
1. 点击浏览器工具栏中的UltraTranslate图标
2. 从下拉菜单中选择目标语言
3. 如需保留两种文本，切换"保留原文"
4. 点击"翻译页面"开始翻译

### 🔑 API配置

<details>
<summary><b>谷歌翻译（默认）</b></summary>

- ✅ 无需配置
- ✅ 免费使用
- ✅ 开箱即用

</details>

<details>
<summary><b>DeepSeek API</b></summary>

1. 从 [DeepSeek平台](https://platform.deepseek.com/) 获取API密钥
2. 打开扩展设置（弹窗中的⚙️按钮）
3. 进入API配置部分
4. 从下拉菜单选择"DeepSeek"
5. 输入您的API密钥
6. 保存设置

</details>

<details>
<summary><b>OpenAI API</b></summary>

1. 从 [OpenAI平台](https://platform.openai.com/) 获取API密钥
2. 打开扩展设置
3. 从下拉菜单选择"OpenAI"
4. 输入您的API密钥
5. 可选：自定义翻译提示词
6. 保存设置

</details>

<details>
<summary><b>百度翻译API</b></summary>

1. 从 [百度翻译](https://fanyi-api.baidu.com/) 获取APP ID和密钥
2. 打开扩展设置
3. 从下拉菜单选择"百度"
4. 以格式输入凭证：`appid:secretkey`
5. 保存设置

</details>

## 🎮 使用方法

### 📖 基础翻译
1. 导航至任何想要翻译的网页
2. 点击UltraTranslate图标
3. 点击"翻译页面"
4. 观察进度指示器显示翻译进度
5. 原文将以降低的透明度显示，译文以绿色高亮

### ⏹️ 停止翻译
- 点击"停止翻译"按钮停止正在进行的翻译
- 适用于大型页面或想要取消时

### ⌨️ 键盘快捷键
- `Alt+T`：切换翻译开/关
- `Alt+O`：切换原文可见性

### 🤖 自定义翻译提示词（仅限AI API）
1. 打开设置页面
2. 导航至翻译部分
3. 在文本区域输入自定义提示词
4. 使用 `{language}` 作为目标语言占位符
5. 示例："翻译成{language}，保留专业术语，简洁自然"

## 🔧 高级设置

### 💾 缓存管理
- **缓存大小**：查看当前缓存的翻译数量
- **缓存限制**：最多存储1000个翻译
- **缓存过期**：默认24小时
- **清除缓存**：删除所有缓存的翻译

### 🎨 外观自定义
- **翻译样式**：选择高亮、下划线、气泡或并排显示
- **翻译颜色**：自定义高亮颜色
- **字体大小调整**：缩放译文（50-150%）
- **原文透明度**：调整原文可见度（0-100%）

### 🚫 排除的网站
添加永远不应自动翻译的URL或域名：
```
example.com
github.com
localhost
```

### 🐛 调试模式
启用控制台日志以排查翻译问题

## 🏗️ 技术架构

### 📋 组件
- **Manifest V3**：现代Chrome扩展架构
- **Content Script**：向网页注入翻译功能
- **Background Service Worker**：处理API调用和消息路由
- **Options Page**：完整的设置管理界面
- **Popup Interface**：快速访问控制

### 🔄 文本处理流程
1. **文本检测**：使用TreeWalker API和NodeFilter高效遍历DOM
2. **过滤**：综合规则跳过不可翻译内容
3. **分段**：Intl.Segmenter API精确分句
4. **批处理**：按上下文和相似性智能分组
5. **翻译**：并发API调用
6. **显示**：DOM操作并保留原文

### ⚡ 性能优化
- **LRU缓存**：减少重复API调用
- **批量处理**：将相似文本分组以提高效率
- **并发翻译**：同时处理多个批次
- **防抖变化**：防止过度重新翻译
- **WeakMap存储**：内存高效的原文存储

## 🔒 隐私与安全

- ✅ 所有翻译通过官方API端点处理
- ✅ API密钥存储在Chrome的安全存储中
- ✅ 不收集或传输数据给第三方
- ✅ 原始页面内容永不被永久修改
- ✅ 缓存本地存储并自动过期

## 🐛 故障排除

### 设置页面无法打开
- 右键点击扩展图标并选择"选项"
- 或前往 `chrome://extensions/` → UltraTranslate → 详情 → 扩展选项

### 翻译不工作
1. 检查是否配置了API密钥（非谷歌服务）
2. 确保页面已完成加载
3. 尝试刷新页面
4. 检查控制台错误（F12 → 控制台）
5. 验证网站不在排除列表中

### 翻译缓慢
- 在设置中减少批处理大小
- 如果缓存太大，清除缓存
- 检查互联网连接
- 考虑使用谷歌翻译（最快）

## 📝 版本历史

### 版本 1.0.0
- ✨ 初始发布，支持多API
- ✨ 保留原文功能
- ✨ 暗黑主题UI
- ✨ 9种界面语言
- ✨ 高级文本过滤
- ✨ 翻译缓存
- ✨ 加载指示器
- ✨ 无障碍功能
- ✨ RTL语言支持

## 🤝 贡献

欢迎贡献！请随时提交问题或拉取请求。

## 📄 许可证

此项目以教育和个人使用为目的提供。

## 📧 支持

如有问题、疑问或建议：
- 在GitHub上开启问题
- 查看现有文档
- 查看故障排除部分

---

用 ❤️ 打造更好的网页翻译体验